---
version: 1

kind: experiment

framework: pytorch

tags: [tests]

build:
  image: pytorch/pytorch:1.13.1-cuda11.6-cudnn8-runtime
  build_steps:
    - pip install -r requirements.txt

environment:
  resources:
    cpu:
      requests: 4
      limits: 12
    memory:
      requests: 1024
      limits: 4096
    gpu:
      requests: 1
      limits: 1

run:
  cmd: python -m tasks.train_polyaxon \
                wandb.setup.project=self-train-test \
                dataset=liver2_mini \
                experiment.name=train_simclr \
                train=simclr \
                train.epochs=2 \
                loader.batch_size=1 \
                loader.num_workers=8

